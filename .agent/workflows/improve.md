---
description: システムの総合的改善（大規模な刷新、規約準拠、品質調整、コンテンツ最適化）
---

# /improve — システム改善ガイドライン

このワークフローは、YT3プロジェクトにおいて「簡潔なコードで最大の価値」を実現するための、改善と調整の全工程をまとめたものです。開発指針に基づき、最適な設計と実装を目指してください。

---

## 1. 改善フェーズの定義

作業を開始する前に、以下のいずれのフェーズに従うかを明確に定義してください。

### A. システムの刷新 (Major Redesign)
システムの根幹に関わる大規模な刷新を行います。
- **適用条件**: 抜本的な改善やオーバーホールが必要な場合。
- **方針**: 既存の実装を部分的に修正するのではなく、必要に応じて設計を整理し、新しいアーキテクチャに基づいて構築し直します。
- **コンテンツへの適応**: 市場トレンドの急変への対応や、LLM の能力を最大限に引き出すためのアーキテクチャ変更は、積極的に検討してください。

### B. 規約準拠のリファクタリング (Strict Refactoring)
ソースコードを「運用ルール」に適合させます。
- **対象**: 不要なコメント、不明確なエラーハンドリング（Fail Fast 化）、`any` 型の使用、ハードコーディング、重複ロジック。
- **方針**: コード自体がその意図を明確に伝えるドキュメントとして機能するように、冗長さを削ぎ落とし、命名を最適化してください。

### C. クリエイティブ調整 (Precision Tuning)
動画の内容、プロンプト、設定パラメータの微調整を行います。
- **方針**: 知的な深みのある「フック」、キャラクターの魅力、情報の信頼性とエンタメ性の両立を追求します。
- **対象ファイル**: `prompts/*.yaml`, `config/*.yaml`

---

## 2. 改善の実行手順

### ステップ 1：現状の分析 (Deep Audit)
改善対象のコード、プロンプト、設定、および関連するガイドラインを確認します。
- `grep -r "any" src/`
- `grep -r "try" src/`
- `ls -R src/` 等を用いて、改善が必要な箇所（肥大化したモジュールなど）を特定してください。

### ステップ 2：計画の策定 (Planning)
`implementation_plan.md` を作成し、修正の具体的な手順を記述します。
- **留意点**: 前提条件の不一致、依存関係の切断、不要なコードの残存がないよう、慎重に計画してください。
- **視点**: 「この改善が、どのように動画の品質向上に寄与するか」を常に意識します。

### ステップ 3：実装の実施 (Execution)
計画に基づき、修正を完遂します。
- **コードの最小化**: コード量を減らすことは、システムの保守性を高めることに直結します。
- **情報の集約**: 共通ロジックは、原則として `src/core.ts` へ集約してください。

### ステップ 4：検証 (Verification)
以下のコマンドを実行し、品質と動作を確認してください。

// turbo
#### ① 静的解析（Linting）
```bash
npx eslint src
```

// turbo
#### ② 論理検証（ユニットテスト）
```bash
npx tsx scripts/tasks.ts test
```

// turbo
#### ③ 動作検証（ドライラン）
```bash
npx tsx scripts/tasks.ts run --dry-run
```

// turbo
#### ④ 品質評価（評価エージェント）
```bash
npx tsx scripts/tasks.ts evaluate
```

---

## 3. コンテンツ調整のポイント

質の高い金融系動画を生成するための調整基準：
- **独自性**: 一般的な知識にとどまらず、データに基づいた独自の視点や最新情報を盛り込んでください。
- **テンポ**: 無駄な説明を省き、核心に素早く到達する構成を心がけてください。
- **信頼性と親しみやすさ**: 数値や用語の正確性を担保しつつ、キャラクターらしい話し方で親しみやすさを演出します。

---

## 4. 完了後の整理 (Final Cleanup)

作業完了後は、古いコードの残骸や不要なコメントが残っていないか改めて確認してください。常にクリーンなコードベースを維持することが、将来のメンテナンスにおいて極めて重要です。

> **Gemini 3 Flash の活用について**
> 推論プロセスの改善において、モデルの変更は原則として認められません。モデルの特性を深く理解し、プロンプトエンジニアリングによってその能力を最大限に引き出してください。
