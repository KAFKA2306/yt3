# 開発ガイドライン (Development Manifesto)

**コードベースの最小化と確実な動作の追求。**

## 開発の基本指針 (Core Guidelines)

1.  **最小化 (Minimize)**: コード量は少ないほどメンテナンス性が高まります。不要な機能、ファイル、依存関係を極限まで排除してください。
2.  **重複排除 (DRY)**: コードの複製は保守の妨げとなります。共通のロジックはすべて `src/core.ts` に集約してください。
3.  **設定駆動 (Config-Driven)**: コード内に直接値を記述することは避けてください。すべてのパラメータは `src/core.ts` を介して `config/*.yaml` から読み込むようにします。
4.  **コメントの最小化 (Self-Documenting)**: コード自体がその意図を明確に伝えるドキュメントであるべきです。補足が必要な場合は、ロジックをより分かりやすく書き直してください。
5.  **Fail Fast (迅速な失敗)**: エラーを隠蔽せず、問題が発生した時点で速やかに停止し、原因を特定しやすくしてください。
6.  **継承 (Inheritance)**: エージェントの一貫した振る舞いを保証するため、すべてのエージェントクラスは `BaseAgent` (`src/core.ts`) を継承してください。
7.  **ドキュメント規定 (Docs)**: 透明性を維持するため、すべての公式な記述は「日本語のみ」で行ってください。
8.  **厳格な型定義 (No any)**: `any` 型の使用は技術的負債となります。TypeScript の恩恵を最大限に受けるため、厳密な型定義を心がけてください。

## アーキテクチャ (Structure)

**Single Source of Truth（唯一の真実のソース）**: `src/core.ts`

-   **src/**
    -   `index.ts`: エントリーポイント
    -   `graph.ts`: LangGraph 定義
    -   `core.ts`: **コア** (設定, ユーティリティ, アセットストア, BaseAgent)
    -   `types.ts`: **型定義** (モデル, ステート, スキーマ)
    -   `layout_engine.ts`: **レイアウトエンジン** (視覚的構成)
    -   **agents/**:
        -   `research.ts` (戦略 & リサーチ)
        -   `content.ts` (台本 & SEO)
        -   `media.ts` (音声合成 & 動画アセンブリ)
        -   `publish.ts` (YouTube & X への投稿)
        -   `memory.ts` (インデックス & 本質抽出)

## 技術スタック (Tech Stack 2026)

1.  **Bun**: ランタイム、パッケージ管理、テストランナーを一本化。Node.jsと比較してシステムコールを大幅に削減し、極限のパフォーマンスを追求。
2.  **Biome**: Rust製の統合ツールチェーン。ESLint/Prettierを廃止し、高速な静的解析とフォーマットを単一バイナリで提供。
3.  **Zod (v4)**: スキーマ・ファーストのバリデーション。外部データ境界での厳格な検証と型推論を統合。
4.  **Strict TypeScript**: `@tsconfig/strictest` を継承。`bunx tsc --noEmit` をCIの最終関門として運用し、`any` を完全に排除。
5.  **Gemini**: メインLLM推論エンジン (`gemini-3.1-flash` 推奨)。
6.  **Voicevox / FFmpeg / Sharp**: 高品質な音声合成およびメディアレンダリング。

---
*本ガイドラインは、2026年の統合型ツールチェーン（The Modern Stack）のベストプラクティスに基づき、開発効率と堅牢性を最大化することを目的としています。*
